(this["webpackJsonpscroll-list"]=this["webpackJsonpscroll-list"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n(1),c=n.n(s),a=n(11),o=n.n(a),r=(n(18),n(9)),l=n(3),h=(n(19),n(12)),d=n(5),u=n(6),f=n(8),m=n(7),p=(n(20),function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).startIndex=0,s.endIndex=0,s.scrollRef=c.a.createRef(),s.scrollTop=0,s.firstItem={index:0,top:0,bottom:0},s.itemCache=[],s.viewableCount=0,s.calledEndReached=!1,s.scrollRect={top:0},s.memorizeItem=function(e,t){var n=e.getBoundingClientRect(),i=n.top+s.scrollTop-(s.scrollRect.top||0);s.itemCache.push({index:t,top:i,bottom:i+n.height})},s.onScroll=function(){var e,t;if(s.scrollRef.current){var n=s.scrollRef.current.scrollTop;(n>s.scrollTop&&n>s.firstItem.bottom||n<s.scrollTop&&n<s.firstItem.top)&&(s.calcIndex(n),s.updateItems()),n<s.scrollTop&&s.scrollTop-n>=30&&(s.calledEndReached=!1),s.scrollTop=n,null===(e=(t=s.props).onScroll)||void 0===e||e.call(t,{scrollTop:n,viewport:s.props.height})}},s.renderItems=function(e){var t=s.props,n=t.renderItem,c=t.keyExtractor;return e.map((function(e,t){var a=c?c(e,t):e.key?e.key:t;return Object(i.jsx)("div",{ref:function(e){e&&s.memorizeItem(e,s.startIndex+t)},children:n({item:e,index:s.startIndex+t})},a)}))},s.deleteRow=function(e){var t=s.findCacheRow(e);-1!==t&&s.itemCache.splice(t,1)},s.findCacheRow=function(e){for(var t=0,n=s.itemCache.length;t<=n;){var i=Math.floor((t+n)/2);if(s.itemCache[i].index===e)return i;s.itemCache[i].index>e?n--:t++}return-1},s.state={startOffset:0,endOffset:0,viewableItems:[]},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.height,n=e.estimateRowHeight;this.viewableCount=Math.ceil(t/n)+5,this.endIndex=this.startIndex+this.viewableCount,this.scrollRef.current&&(this.scrollRect=this.scrollRef.current.getBoundingClientRect()),this.updateItems()}},{key:"componentDidUpdate",value:function(e){e.data.length!==this.props.data.length&&(this.calledEndReached=!1,this.updateItems())}},{key:"findFirst",value:function(e){var t=this.props.estimateRowHeight,n=Math.floor(e/t),i=this.itemCache[n];if(!i)return null;if(i.bottom===e)return i;if(i.bottom>e)for(;n>=1&&this.itemCache[n].bottom>=e;)n--;else for(;n<this.itemCache.length-1&&this.itemCache[n].bottom<e;)n++;return this.itemCache[n]||null}},{key:"calcIndex",value:function(e){var t=this.findFirst(e);if(e=e||0,t){this.firstItem=Object(h.a)({},t),this.startIndex=this.firstItem.index,this.endIndex=this.startIndex+this.viewableCount;var n,i,s=this.props.onEndReachedThreshold||5;if(Math.abs(this.endIndex-this.props.data.length)<=s)if(!this.calledEndReached&&e>this.scrollTop)null===(n=(i=this.props).onEndReached)||void 0===n||n.call(i),this.calledEndReached=!0}}},{key:"updateItems",value:function(){var e=this.props,t=e.data,n=e.estimateRowHeight,i=e.onViewableItemsChanged,s=t.slice(this.startIndex,this.endIndex);null===i||void 0===i||i({viewableItems:s,start:this.startIndex,end:this.endIndex}),this.setState({startOffset:this.firstItem.top,endOffset:(t.length-this.endIndex)*n,viewableItems:s})}},{key:"render",value:function(){var e=this.props.height,t=this.state,n=t.startOffset,s=t.endOffset,c=t.viewableItems;return Object(i.jsx)("div",{className:"scroll-list-container",ref:this.scrollRef,onScroll:this.onScroll,style:{height:e},children:Object(i.jsx)("div",{style:{paddingTop:"".concat(n,"px"),paddingBottom:"".concat(s,"px")},children:this.renderItems(c)})})}}]),n}(c.a.Component)),v=(n(21),function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(e){var i;return Object(d.a)(this,n),(i=t.call(this,e)).startX=0,i.startY=0,i.currentX=0,i.moveX=0,i.moveY=0,i.onTouchStart=function(e){i.startX=e.touches[0].pageX,i.startY=e.touches[0].pageY},i.onTouchMove=function(e){var t,n;e.stopPropagation(),i.currentX=e.touches[0].pageX,i.moveX=i.currentX-i.startX,i.moveY=e.touches[0].pageY-i.startY,Math.abs(i.moveY)>Math.abs(i.moveX)||Math.abs(i.moveX)<10||(i.setState({animated:!0}),null===(t=(n=i.props).onSelect)||void 0===t||t.call(n))},i.onTouchEnd=function(e){i.setState({animated:!0})},i.onDelete=function(){var e,t;i.setState({animated:!1}),null===(e=(t=i.props).onDelete)||void 0===e||e.call(t)},i.state={animated:!1},i}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.threshold,s=this.state.animated,c=this.moveX>=0?0:-n,a={width:"calc(100% + ".concat(n,"px)")};return s&&t&&(a.transform="translateX(".concat(c,"px)"),a.transition="transform 0.3s ease"),Object(i.jsx)("div",{className:"swiper-container",children:Object(i.jsxs)("div",{className:"inner",style:a,children:[Object(i.jsx)("div",{className:"left",onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,children:this.props.children}),Object(i.jsx)("div",{className:"right",onClick:this.onDelete,style:{width:n},children:"\u5220\u9664"})]})})}}]),n}(c.a.Component));var b=function(){var e=Object(s.useState)(new Array(100).fill(0).map((function(e,t){return{index:t}}))),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(-1),o=Object(l.a)(a,2),h=o[0],d=o[1],u=Object(s.useState)(!0),f=Object(l.a)(u,2),m=f[0],b=f[1],j=Object(s.useState)(!1),x=Object(l.a)(j,2),O=x[0],I=x[1],g=Object(s.useRef)(null);return Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsxs)("div",{className:"setting",children:[Object(i.jsx)("div",{className:m?"selected":"",onClick:function(){b(!m)},children:"\u65e0\u9650\u6eda\u52a8"}),Object(i.jsx)("div",{className:O?"selected":"",onClick:function(){I(!O)},children:"\u5de6\u6ed1\u5220\u9664"})]}),Object(i.jsx)(p,{ref:g,renderItem:function(e){var t=e.item,s=e.index;return O?Object(i.jsx)(v,{selected:h===s,threshold:60,onSelect:function(){return d(s)},onDelete:function(){var e=Object(r.a)(n);e.splice(s,1),g.current&&g.current.deleteRow(s),d(-1),c(e)},children:Object(i.jsx)("div",{className:"item",children:"#"+s+"-"+t.index})}):Object(i.jsx)("div",{className:"item",children:"#"+s+"-"+t.index})},data:n,height:window.innerHeight-50,onEndReached:function(){m&&c([].concat(Object(r.a)(n),Object(r.a)(new Array(100).fill(0).map((function(e,t){return{index:n.length+t}}))))),console.log("end reached")},estimateRowHeight:50})]})})},j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),i(e),s(e),c(e),a(e)}))};o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(b,{})}),document.getElementById("root")),j()}},[[22,1,2]]]);
//# sourceMappingURL=main.8123dccc.chunk.js.map